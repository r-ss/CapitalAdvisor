//
//  Tips.swift
//  CapitalAdvisor
//
//  Created by Alex Antipov on 06/10/15.
//  Copyright ¬© 2015 Alex Antipov. All rights reserved.
//

import UIKit

class Tips {
    
    var tips = [Tip]()
    
    //let appDelegate:AppDelegate!
    
    let appDelegate = UIApplication.sharedApplication().delegate as! AppDelegate
    
    let valueFormat:ValueFormat = ValueFormat()
    
    var stocks:StocksContainer
    
    
    init(){
        
        self.stocks = appDelegate.container
    }
    
    
    func analyse() {
        
        self.tips.removeAll()

        searchPercentOfInvested()
        whatIfYouInvestAllCashFor12Percent()
        searchPercentOfRoubles()
    }
    
    
    
    
    func searchPercentOfInvested(){
        let total = stocks.totalStocksValueInCurrency(.RUB)
        let cash = stocks.totalStocksValueOfTypeInCurrency(.Cash, currency: .RUB)
        let percent = cash / total
        
        let long = "–î–µ–Ω—å–≥–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å, —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ –≤—ã. –≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –∑–∞–¥—É–º–∞—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ—Ä—è–∂–∞—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏. –ú—ã –Ω–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞–µ–º –Ω–∏ —Å –æ–¥–∏–º –±–∞–Ω–∫–æ–º –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –∏ –Ω–µ —Ä–µ–∫–ª–∞–º–∏—Ä—É–µ–º –∏—Ö —É—Å–ª—É–≥–∏."
        
        switch percent {
        case 0.25...0.49:
            let tip = Tip(intro: "–í—ã –¥–µ—Ä–∂–∏—Ç–µ –±–æ–ª—å—à–µ —á–µ—Ç–≤–µ—Ä—Ç–∏ —Å–≤–æ–∏—Ö –¥–µ–Ω–µ–≥ –≤ –≤–∏–¥–µ –Ω–∞–ª–∏—á–Ω—ã—Ö. –≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–∏ –¥–µ–Ω—å–≥–∏ –Ω–µ –ø—Ä–∏–Ω–æ—Å—è—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –¥–æ—Ö–æ–¥–∞.", text: long)
            self.tips.append(tip)
        case 0.5...0.99:
            let tip = Tip(intro: "–í—ã –¥–µ—Ä–∂–∏—Ç–µ –±–æ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã —Å–≤–æ–∏—Ö –¥–µ–Ω–µ–≥ –≤ –≤–∏–¥–µ –Ω–∞–ª–∏—á–Ω—ã—Ö. –≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–∏ –¥–µ–Ω—å–≥–∏ –Ω–µ –ø—Ä–∏–Ω–æ—Å—è—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –¥–æ—Ö–æ–¥–∞.", text: long)
            self.tips.append(tip)
        case 1:
            let tip = Tip(intro: "–ü–æ—Ö–æ–∂–µ, –≤—ã –¥–µ—Ä–∂–∏—Ç–µ –≤—Å–µ —Å–≤–æ–∏ –¥–µ–Ω—å–≥–∏ –≤ –≤–∏–¥–µ –Ω–∞–ª–∏—á–Ω—ã—Ö. –≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –≤–∞—à–∏ –¥–µ–Ω—å–≥–∏ –Ω–µ –ø—Ä–∏–Ω–æ—Å—è—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –¥–æ—Ö–æ–¥–∞.", text: long)
            self.tips.append(tip)
        default:
            return
        }
    }
    
    func whatIfYouInvestAllCashFor12Percent(){
        //let total = stocks.totalStocksValueInCurrency(.RUB)
        let cash = stocks.totalStocksValueOfTypeInCurrency(.Cash, currency: .RUB)
        
        let long = "–û–¥–Ω–∞–∫–æ, –¥–µ–ø–æ–∑–∏—Ç—ã –Ω–µ—É–¥–æ–±–Ω—ã —Ç–µ–º, —á—Ç–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–ø–æ–∑–∏—Ç–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤. –ü–æ—ç—Ç–æ–º—É –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–∞–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏ –∏ –∫–∞—Ä—Ç–∞–º–∏ —Å –≤—ã–ø–ª–∞—Ç–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å—Ç–∞—Ç–æ–∫ ‚Äî –ø–æ —Ç–∞–∫–∏–º –∫–∞—Ä—Ç–∞–º –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å 7-8% –Ω–∞ –æ—Å—Ç–∞—Ç–æ–∫ –∏ —Å–º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏. –ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –¥–µ—Ä–∂–∞—Ç—å –Ω–∞ —Ç–∞–∫–∏—Ö –∫–∞—Ä—Ç–∞—Ö —Å—É–º–º—É, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –Ω–∞ –æ–¥–∏–Ω-–¥–≤–∞ –º–µ—Å—è—Ü–∞, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –≤–∞—à–∏—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –ø–æ–ª–æ–∂–∏—Ç—å –Ω–∞ –æ–±—ã—á–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç –∏–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –Ω–µ –∑–∞–±—ã–≤–∞—è –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö."
        
        if cash > 100 {
            let devidend = cash * 0.12
            let tip = Tip(intro: "–ï—Å–ª–∏ –ø–æ–ª–æ–∂–∏—Ç—å –≤—Å–µ –≤–∞—à–∏ –Ω–∞–ª–∏—á–Ω—ã–µ –Ω–∞ —Ä—É–±–ª–µ–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç –ø–æ–¥ 12% –≥–æ–¥–æ–≤—ã—Ö, —Ç–æ —á–µ—Ä–µ–∑ –≥–æ–¥ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –¥–æ—Ö–æ–¥ <em> \(valueFormat.format(devidend, currency: .RUB)) </em>", teaser:"–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ", text: long)
            self.tips.append(tip)
        }
    }
    
    func searchPercentOfRoubles(){
        
        //let totalRUB:Double = appDelegate.container.totalByCurrencies[.RUB]!
        let totalUSD:Double = appDelegate.container.totalByCurrencies[.USD]!
        let totalEUR:Double = appDelegate.container.totalByCurrencies[.EUR]!
        
        let long = "–†—É–±–ª—å ‚Äì —ç—Ç–æ –∫—Ä–∞–π–Ω–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–ø—Ä—è–º—É—é –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ü–µ–Ω—ã –Ω–∞ –Ω–µ—Ñ—Ç—å. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏ –±—ã–ª–∏ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —Ä—É–±–ª—å –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–ª—Å—è –±–æ–ª–µ–µ —á–µ–º –≤ –¥–≤–∞ —Ä–∞–∑–∞, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ü–µ 2014 –≥–æ–¥–∞. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–æ–≤–æ–ª—å–Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–º –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —Ä—É–±–ª–µ–≤—ã–µ –∞–∫—Ç–∏–≤—ã. –ó–∞—á–∞—Å—Ç—É—é, –¥–µ–ø–æ–∑–∏—Ç—ã –≤ –≤–∞–ª—é—Ç–µ –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –Ω–∞–¥–µ–∂–Ω–µ–µ —Ä—É–±–ª–µ–≤—ã—Ö –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é —Å—Ç–∞–≤–∫—É –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –≤–∫–ª–∞–¥–∞–º–∏ –≤ —Ä—É–±–ª—è—Ö. –ê –≤ —Å–ª—É—á–∞–µ –æ–±–≤–∞–ª–∞ —Ä—É–±–ª—è, –≤–∞–ª—é—Ç–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã –ø—Ä–∏–Ω–æ—Å—è—Ç —Å–≤–µ—Ä—Ö–¥–æ—Ö–æ–¥ –≤ —Ä—É–±–ª–µ–≤–æ–º —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ. –ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–∞–º –¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 30% –≤ –≤–∞–ª—é—Ç–µ - –î–æ–ª–ª–∞—Ä–∞—Ö –∏–ª–∏ –ï–≤—Ä–æ. –ê —Ä–∞–∑–¥–µ–ª–∏–≤ —Å–≤–æ–∏ –∞–∫—Ç–∏–≤—ã –ø–æ—Ä–æ–≤–Ω—É –º–µ–∂–¥—É —Ç—Ä–µ–º—è –≤–∞–ª—é—Ç–∞–º–∏, –≤—ã –∑–∞—â–∏—Ç–∏—Ç–µ —Å–µ–±—è –æ—Ç –∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π, —Ç–∞–∫ –∫–∞–∫ –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç—ã –±—É–¥–µ—Ç –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ä–æ—Å—Ç–æ–º –¥—Ä—É–≥–∏—Ö. –ö–æ–Ω–µ—á–Ω–æ –≤—ã —Å–∞–º–∏ –¥–æ–ª–∂–Ω—ã —Ä–µ—à–∏—Ç—å, –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞. –ò, –±–µ–∑—É—Å–ª–æ–≤–Ω–æ, –≤–∞—à–∏ –≤–∞–ª—é—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤—ã, –∫–∞–∫ –∏ —Ä—É–±–ª–µ–≤—ã–µ, –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—É–¥–∞-—Ç–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã: –¥–µ–ø–æ–∑–∏—Ç—ã, –∞–∫—Ü–∏–∏, —Ñ–æ–Ω–¥—ã –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ."
        
        if totalUSD == 0 && totalEUR == 0 {
            let tip = Tip(intro: "–ü–æ—Ö–æ–∂–µ, –≤—ã —Ö—Ä–∞–Ω–∏—Ç–µ –≤—Å–µ —Å–≤–æ–∏ –¥–µ–Ω—å–≥–∏ –≤ —Ä—É–±–ª—è—Ö üòÜ", teaser: "–ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ?", text: long)
            self.tips.append(tip)
        }
        
       
    }
    
    
    
    
}
